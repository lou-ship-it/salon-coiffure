<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Salon Élégance - Présentation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<button onclick="deconnexion()">Se déconnecter</button>
<script>
  function deconnexion() {
    localStorage.removeItem("estConnecte");
    window.location.href = "login.html";
  }
</script>
<script>
  // Vérifie si l'utilisateur est connecté
  if (!localStorage.getItem("estConnecte")) {
    window.location.href = "login.html"; // Redirige vers la page de connexion
  }
</script>
  <header>
    <h1>Salon de Coiffure Élégance</h1>
    <nav>
      <a href="accueil.html">Accueil</a>
      <a href="reservation.html">Réservation</a>
      <a href="avis.html">Avis</a>
    </nav>
  </header>
<body>
  <h1>Planning de réservation</h1>
  <iframe src="https://calendar.google.com/calendar/embed?src=2b169fe8c65fac33161c5bc296cb32e924cffc6447a680270ebf4881328f01d3%40group.calendar.google.com&ctz=Europe%2FParis&mode=WEEK&showTitle=0&showDate=1&showPrint=0&showTabs=0&showCalendars=0&showTz=0&bgcolor=%23ffffff"
    style="border: 10" width="800" height="600" frameborder="10" scrolling="no"></iframe>

  <h2>Réserver un créneau</h2>
  <form id="reservation-form">
    <label>Nom :</label><br>
    <input type="text" name="nom" required><br><br>

    <label>Prénom :</label><br>
    <input type="text" name="prenom" required><br><br>

    <label>Date :</label><br>
    <input type="date" name="date" required><br><br>

    <label>Heure :</label><br>
    <input type="time" name="heure" required><br><br>

    <label>Que souhaitez-vous faire ?</label><br>
    <textarea name="description" placeholder="Ex: Coupe, brushing..." onfocus="this.placeholder=''"></textarea><br><br>

    <button type="submit">Réserver</button>
  </form>

  <p id="confirmation"></p>

  <script>
    document.getElementById("reservation-form").addEventListener("submit", function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      fetch("https://script.google.com/macros/s/AKfycbzbUTH2VE_TIQOwH3w6yLlfjU-9Q02zfJlfWdCchQadK6iJYVq1XRL-nMd_B4y88JIH/exec", {
        method: "POST",
        body: formData
      })
      .then(res => res.text())
      .then(data => {
        document.getElementById("confirmation").innerText = data;
      })
      .catch(err => {
        document.getElementById("confirmation").innerText = "❌ Une erreur est survenue.";
      });
    });
  </script>
</body>
</html>